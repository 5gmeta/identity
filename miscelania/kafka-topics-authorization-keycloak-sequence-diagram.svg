<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="880" height="886"><desc>bottomparticipants%0Atitle%20Kafka%20topics%20authorization%20with%20Keycloak%0A%0Aparticipant%20%22Data%20consumer%5Cn(Third%20Party)%22%20as%20C%0Aparticipant%20%22Dataflow%20API%22%20as%20D%0Aparticipant%20%22Kafka%22%20as%20Ka%0Aparticipant%20%22Keycloak%22%20as%20Ke%0A%0A%0A%0AC-%3ED%3ASubscribe%20to%20dataflow%0AD-%3EKa%3ACreate%20a%20new%20topic%0AKa--%3ED%3ATopic%20created%0AD-%3EKe%3ASet%20up%20authorization%20%5Cnfor%20the%20created%20topic%0AKe-%3EKe%3ADeclare%20the%20topic%20as%20a%20resource%5CnCreate%20a%20policy%20for%20the%20user%5CnCreate%20a%20permission%20linking%20both%0AD--%3EC%3ATopic%20available%0AC-%3EKe%3AGet%20token%20(username%2Fpassword)%0AKe--%3EC%3AToken%0AC-%3EKa%3AConsume%20data%20with%20token%0AKa-%3EKe%3AValidate%20user%20authorization%5Cn%20for%20the%20topic%0AKe--%3EKa%3AAuthorized%0AKa--%3EC%3AData%0A%0A%0A%0A%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="880" height="886"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="243.99940803076106" y="24.50280495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Kafka topics authorization with Keycloak</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 75.59421623684766 112.05949463799999 L 75.59421623684766 812.8397162079999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 259.3193396690091 112.05949463799999 L 259.3193396690091 812.8397162079999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 425.1132039458971 112.05949463799999 L 425.1132039458971 812.8397162079999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 641.1718692481758 112.05949463799999 L 641.1718692481758 812.8397162079999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.167601649999995 51.782594460999995 L 143.02083082369532 51.782594460999995 L 143.02083082369532 112.05949463799999 L 8.167601649999995 112.05949463799999 L 8.167601649999995 51.782594460999995 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="25.8912972305" y="79.389088038" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Data consumer</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="34.86768425442578" y="95.724291338" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(Third Party)</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 199.2262898404622 68.117797761 L 319.412389497556 68.117797761 L 319.412389497556 112.05949463799999 L 199.2262898404622 112.05949463799999 L 199.2262898404622 68.117797761 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="216.9499854209622" y="95.72429133800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Dataflow API</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 388.6457797277018 68.117797761 L 461.58062816409245 68.117797761 L 461.58062816409245 112.05949463799999 L 388.6457797277018 112.05949463799999 L 388.6457797277018 68.117797761 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="406.3694753082018" y="95.72429133800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Kafka</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 593.7058869855468 68.117797761 L 688.6378515108047 68.117797761 L 688.6378515108047 112.05949463799999 L 593.7058869855468 112.05949463799999 L 593.7058869855468 68.117797761 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="611.4295825660469" y="95.72429133800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Keycloak</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.167601649999995 812.8397162079999 L 143.02083082369532 812.8397162079999 L 143.02083082369532 873.1166163849999 L 8.167601649999995 873.1166163849999 L 8.167601649999995 812.8397162079999 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="25.8912972305" y="840.4462097849998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Data consumer</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="34.86768425442578" y="856.7814130849998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">(Third Party)</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 199.2262898404622 812.8397162079999 L 319.412389497556 812.8397162079999 L 319.412389497556 856.7814130849999 L 199.2262898404622 856.7814130849999 L 199.2262898404622 812.8397162079999 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="216.9499854209622" y="840.4462097849998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Dataflow API</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 388.6457797277018 812.8397162079999 L 461.58062816409245 812.8397162079999 L 461.58062816409245 856.7814130849999 L 388.6457797277018 856.7814130849999 L 388.6457797277018 812.8397162079999 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="406.3694753082018" y="840.4462097849998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Kafka</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 593.7058869855468 812.8397162079999 L 688.6378515108047 812.8397162079999 L 688.6378515108047 856.7814130849999 L 593.7058869855468 856.7814130849999 L 593.7058869855468 812.8397162079999 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="611.4295825660469" y="840.4462097849998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Keycloak</text></g></g><g><g><g><rect fill="white" stroke="none" x="94.92420680851428" y="144.729901238" width="145.06514228882813" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="97.37448730351429" y="159.43158420799998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Subscribe to dataflow</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 75.59421623684766 165.965665528 L 245.87002228534243 165.965665528" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(259.3193396690091,165.965665528) translate(-259.3193396690091,-165.965665528)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 245.7066702523424 159.15933081966665 L 259.3193396690091 165.965665528 L 245.7066702523424 172.77200023633333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="278.64933024067574" y="190.468470478" width="127.13388313355469" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="281.09961073567575" y="205.17015344799998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Create a new topic</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 259.3193396690091 211.704234768 L 411.66388656223046 211.704234768" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(425.1132039458971,211.704234768) translate(-425.1132039458971,-211.704234768)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 411.50053452923044 204.89790005966665 L 425.1132039458971 211.704234768 L 411.50053452923044 218.51056947633333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="296.16901407856636" y="236.207039718" width="92.09451545777344" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="298.6192945735664" y="250.90872268799998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Topic created</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 425.1132039458971 257.442804008 L 272.76865705267574 257.442804008" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(259.3193396690091,257.442804008) translate(-259.3193396690091,-257.442804008)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 272.93200908567576 250.63646929966666 L 259.3193396690091 257.442804008 L 272.93200908567576 264.24913871633333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="380.55841600460803" y="281.945608958" width="139.37437690796875" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="380.55841600460803" y="298.28081225799997" width="134.47101081910156" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="383.00869649960805" y="296.64729192799996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Set up authorization </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="383.00869649960805" y="312.98249522799995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">for the created topic</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 259.3193396690091 319.516576548 L 627.7225518645091 319.516576548" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(641.1718692481758,319.516576548) translate(-641.1718692481758,-319.516576548)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 627.5591998315091 312.71024183966665 L 641.1718692481758 319.516576548 L 627.5591998315091 326.3229112563333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="660.5018598198425" y="344.019381498" width="207.7995325476172" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="660.5018598198425" y="360.35458479799996" width="180.90620674195313" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="660.5018598198425" y="376.68978809799995" width="214.3206507116797" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="662.9521403148425" y="358.72106446799995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Declare the topic as a resource</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="662.9521403148425" y="375.05626776799994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Create a policy for the user</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="662.9521403148425" y="391.39147106799993" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Create a permission linking both</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 641.1718692481758 397.92555238799997 L 706.5126824481757 397.92555238799997 L 706.5126824481757 419.161316678 L 654.6211866318424 419.161316678" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(641.1718692481758,419.161316678) translate(-641.1718692481758,-419.161316678)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 654.7845386648424 412.35498196966665 L 641.1718692481758 419.161316678 L 654.7845386648424 425.96765138633333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="116.92491634220569" y="443.664121628" width="101.06372322144531" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="119.37519683720569" y="458.36580459799995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Topic available</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 259.3193396690091 464.899885918 L 89.04353362051432 464.899885918" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(75.59421623684766,464.899885918) translate(-75.59421623684766,-464.899885918)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 89.20688565351432 458.09355120966666 L 75.59421623684766 464.899885918 L 89.20688565351432 471.70622062633333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="251.2298661293477" y="489.402690868" width="214.30635322632813" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="253.68014662434769" y="504.10437383799996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Get token (username/password)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 75.59421623684766 510.638455158 L 627.7225518645091 510.638455158" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(641.1718692481758,510.638455158) translate(-641.1718692481758,-510.638455158)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 627.5591998315091 503.83212044966666 L 641.1718692481758 510.638455158 L 627.5591998315091 517.4447898663333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="336.3729935707539" y="535.141260108" width="44.02009834351563" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="338.82327406575394" y="549.842943078" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 641.1718692481758 556.377024398 L 89.04353362051432 556.377024398" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(75.59421623684766,556.377024398) translate(-75.59421623684766,-556.377024398)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 89.20688565351432 549.5706896896667 L 75.59421623684766 556.377024398 L 89.20688565351432 563.1833591063333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="165.1904931950052" y="580.8798293479999" width="170.32643379273438" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="167.64077369000518" y="595.5815123179999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Consume data with token</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 75.59421623684766 602.115593638 L 411.66388656223046 602.115593638" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(425.1132039458971,602.115593638) translate(-425.1132039458971,-602.115593638)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 411.50053452923044 595.3092589296666 L 425.1132039458971 602.115593638 L 411.50053452923044 608.9219283463333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="444.4431945175638" y="626.618398588" width="177.39868415894531" height="21.23576429"/></g><g><rect fill="white" stroke="none" x="444.4431945175638" y="642.953601888" width="85.57339729371094" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="446.89347501256384" y="641.320081558" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Validate user authorization</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="446.89347501256384" y="657.655284858" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> for the topic</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 425.1132039458971 664.189366178 L 627.7225518645091 664.189366178" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(641.1718692481758,664.189366178) translate(-641.1718692481758,-664.189366178)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 627.5591998315091 657.3830314696667 L 641.1718692481758 664.189366178 L 627.5591998315091 670.9957008863333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="495.64932549900914" y="688.6921711279999" width="74.98642219605469" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="498.09960599400915" y="703.3938540979999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Authorized</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 641.1718692481758 709.927935418 L 438.56252132956376 709.927935418" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(425.1132039458971,709.927935418) translate(-425.1132039458971,-709.927935418)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 438.7258733625638 703.1216007096666 L 425.1132039458971 709.927935418 L 438.7258733625638 716.7342701263333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="232.42025241131378" y="734.4307403679999" width="35.86691536011719" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="234.87053290631377" y="749.1324233379999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 425.1132039458971 755.6665046579999 L 89.04353362051432 755.6665046579999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(75.59421623684766,755.6665046579999) translate(-75.59421623684766,-755.6665046579999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 89.20688565351432 748.8601699496666 L 75.59421623684766 755.6665046579999 L 89.20688565351432 762.4728393663332 Z"/></g></g></g></g></svg>
